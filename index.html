<!doctype html>
<html lang="en">

<head>
<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-6650285488588170"
     crossorigin="anonymous"></script>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Energy of Geometry — Video Lectures</title>
  <meta name="description" content="Watch Energy of Geometry lectures. A fast, single-page gallery of all videos." />
  <meta property="og:title" content="Energy of Geometry — Video Lectures" />
  <meta property="og:description" content="A single, fast page listing all videos with thumbnails." />
  <meta property="og:type" content="website" />
  <meta name="google-adsense-account" content="ca-pub-6650285488588170">

  <link rel="preconnect" href="https://www.googleapis.com" />
  <link rel="preconnect" href="https://i.ytimg.com" />
  <link rel="preconnect" href="https://www.youtube.com" />
  <style>
    :root { --maxw: 1200px; --gap: 14px; }
    * { box-sizing: border-box; }
    body { margin: 0; font-family: system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif; background:#0b0d12; color:#f4f6f8; }
    header { max-width: var(--maxw); margin: 28px auto 12px; padding: 0 16px; }
    header h1 { margin: 0 0 6px; font-size: clamp(1.2rem, 2.5vw, 1.8rem); }
    header p { margin: 0; opacity: .85; }
    .controls { max-width: var(--maxw); margin: 12px auto 12px; padding: 0 16px; display: flex; gap: 10px; align-items: center; }
    .controls input[type="search"] { flex: 1; padding: 10px 12px; border-radius: 10px; border: 1px solid #2a3142; background:#111624; color:#e9edf2; }
    .grid { max-width: var(--maxw); margin: 12px auto 40px; padding: 0 16px;
            display:grid; gap:var(--gap); grid-template-columns: repeat(auto-fill, minmax(220px, 1fr)); }
    .card { position: relative; border-radius: 10px; overflow: hidden; background: #141823; text-decoration: none; color: inherit; }
    .thumb { aspect-ratio: 16/9; width: 100%; display: block; object-fit: cover; background: #0f1320; }
    .title { padding: 10px 12px; font-size: .95rem; line-height: 1.3; color:#e9edf2; min-height: 2.6em; }
    .play { position:absolute; inset:auto 10px 10px auto; background:rgba(0,0,0,.55); padding:6px 10px; border-radius:999px; font-size:.85rem;}
    a.card:focus-visible { outline: 3px solid #8ab4f8; outline-offset: 2px; }
    footer { max-width: var(--maxw); margin: 0 auto 40px; padding: 0 16px; opacity: .8; font-size: .9rem; }
    .loading { max-width: var(--maxw); margin: 20px auto; padding: 0 16px; opacity: .85; }
    .error { color: #ffb4b4; }
    /* Modal */
    dialog { border: none; padding: 0; border-radius: 12px; width: min(960px, 95vw); background: #000; }
    dialog::backdrop { background: rgba(0,0,0,.65); }
    .player-wrap { position: relative; aspect-ratio: 16/9; }
    .close-btn { position: absolute; top: 8px; right: 8px; z-index: 2; background: rgba(0,0,0,.6); color: #fff; border: 0; padding: 8px 10px; border-radius: 8px; cursor: pointer; }
    iframe { width: 100%; height: 100%; border: 0; }

       /* 상단 배너 컨테이너 */
.ad-top { max-width: 1200px; margin: 8px auto 0; padding: 0 16px; }

  </style>
</head>
<body>
  <header>
    <h1>Energy of Geometry</h1>
    <p>Click any thumbnail to play in-place. </p>
    

  </header>

     <!-- 상단 배너 -->
<div class="ad-top">
  <ins class="adsbygoogle"
       style="display:block; text-align:center;"
       data-ad-client="ca-pub-6650285488588170"
       data-ad-slot="2979940647"
       data-ad-format="auto"
       data-full-width-responsive="true"></ins>
</div>
<script>
  (adsbygoogle = window.adsbygoogle || []).push({});
</script>


  <div class="controls">
    <input id="q" type="search" placeholder="Filter by title…" aria-label="Filter videos by title" />
    <div id="count" aria-live="polite"></div>
  </div>

  <main class="grid" id="grid" aria-live="polite"></main>

  <div id="status" class="loading" role="status">Loading videos…</div>

  <footer>
    © <span id="year"></span> Energy of Geometry. All videos hosted on YouTube.
  </footer>

  <!-- Modal player -->
  <dialog id="dlg" aria-label="Video player">
    <div class="player-wrap">
      <button class="close-btn" id="closeBtn" aria-label="Close">✕ Close</button>
      <iframe id="player" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" allowfullscreen></iframe>
    </div>
  </dialog>

  <script>
    // === Configuration ===
    const CHANNEL_ID = "UCZG76bvfaiRuNzHNeUSappQ"; // Your channel id
    const API_KEY = "AIzaSyAd9kaxh8Bd1jRLR8CGqySsGcjxB2cE0oM"; // Your API key
    const MAX_RESULTS_PER_PAGE = 50; // YouTube API maximum

    // === Helpers ===
    const $ = (sel) => document.querySelector(sel);
    const grid = $("#grid"), status = $("#status"), count = $("#count");

    function fmt(n) { return n.toLocaleString(); }
    function h(tag, props = {}, ...children) {
      const el = document.createElement(tag);
      Object.entries(props).forEach(([k, v]) => {
        if (k === "className") el.className = v;
        else if (k.startsWith("on") && typeof v === "function") el.addEventListener(k.slice(2).toLowerCase(), v);
        else if (v != null) el.setAttribute(k, v);
      });
      children.forEach(c => el.appendChild(typeof c === "string" ? document.createTextNode(c) : c));
      return el;
    }

    // === Fetch uploads playlist id for the channel ===
    async function getUploadsPlaylistId(channelId) {
      const url = new URL("https://www.googleapis.com/youtube/v3/channels");
      url.searchParams.set("part", "contentDetails");
      url.searchParams.set("id", channelId);
      url.searchParams.set("key", API_KEY);
      const res = await fetch(url);
      if (!res.ok) throw new Error("Failed to load channel details");
      const data = await res.json();
      const items = data.items || [];
      if (!items.length) throw new Error("Channel not found or API key not enabled for YouTube Data API v3.");
      return items[0].contentDetails.relatedPlaylists.uploads;
    }

    // === Fetch every video in uploads playlist ===
    async function fetchAllPlaylistItems(playlistId) {
      let nextPageToken = null, all = [];
      do {
        const url = new URL("https://www.googleapis.com/youtube/v3/playlistItems");
        url.searchParams.set("part", "snippet,contentDetails");
        url.searchParams.set("playlistId", playlistId);
        url.searchParams.set("maxResults", String(MAX_RESULTS_PER_PAGE));
        url.searchParams.set("key", API_KEY);
        if (nextPageToken) url.searchParams.set("pageToken", nextPageToken);
        const res = await fetch(url);
        if (!res.ok) throw new Error("Failed to load playlist items");
        const data = await res.json();
        (data.items || []).forEach(it => {
          const id = (it.contentDetails && it.contentDetails.videoId) || (it.snippet?.resourceId?.videoId);
          const title = it.snippet?.title || "Untitled";
          const thumb = it.snippet?.thumbnails?.high?.url || it.snippet?.thumbnails?.medium?.url || it.snippet?.thumbnails?.default?.url;
          const publishedAt = it.contentDetails?.videoPublishedAt || it.snippet?.publishedAt;
          all.push({ id, title, thumb, publishedAt });
        });
        nextPageToken = data.nextPageToken;
      } while (nextPageToken);
      // newest first
      all.sort((a,b) => new Date(b.publishedAt) - new Date(a.publishedAt));
      return all;
    }

    // === Render grid ===
    function render(videos) {
      grid.innerHTML = "";
      videos.forEach(v => {
        const a = h("a", {
          href: `https://www.youtube.com/watch?v=${v.id}`,
          className: "card",
          role: "button",
          "aria-label": `Play: ${v.title}`,
          onClick: (e) => { e.preventDefault(); openModal(v.id); }
        },
          h("img", { class: "thumb", loading: "lazy", alt: v.title, referrerpolicy: "strict-origin-when-cross-origin", src: v.thumb }),
          h("div", { class: "play" }, "▶ Play"),
          h("div", { class: "title" }, v.title)
        );
        grid.appendChild(a);
      });
      count.textContent = `${fmt(videos.length)} video(s)`;
    }

    // === Modal player ===
    const dlg = document.getElementById('dlg');
    const player = document.getElementById('player');
    const closeBtn = document.getElementById('closeBtn');
    function openModal(id) {
      player.src = `https://www.youtube.com/embed/${id}?autoplay=1&rel=0`;
      dlg.showModal();
    }
    function closeModal() {
      player.src = '';
      dlg.close();
    }
    closeBtn.addEventListener('click', closeModal);
    dlg.addEventListener('cancel', (e) => { e.preventDefault(); closeModal(); });
    document.addEventListener('keydown', (e) => { if (e.key === 'Escape' && dlg.open) closeModal(); });

    // === Search filter ===
    const q = document.getElementById('q');
    let allVideos = [];
    q.addEventListener('input', () => {
      const term = q.value.trim().toLowerCase();
      if (!term) return render(allVideos);
      render(allVideos.filter(v => v.title.toLowerCase().includes(term)));
    });

    // === Boot ===
    (async function boot() {
      try {
        const uploads = await getUploadsPlaylistId(CHANNEL_ID);
        const list = await fetchAllPlaylistItems(uploads);
        allVideos = list;
        render(allVideos);
        status.remove();
      } catch (err) {
        status.classList.add("error");
        status.textContent = (err && err.message) ? err.message : "Failed to load videos.";
        console.error(err);
      }
    })();

    document.getElementById('year').textContent = new Date().getFullYear();
  </script>
</body>
</html>
